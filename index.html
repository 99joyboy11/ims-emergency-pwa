<!DOCTYPE html>
<html>
<head>
<title>Citizen Emergency</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="manifest" href="manifest.json">

<style>
body{
    font-family: Arial;
    text-align:center;
    background:#f4f4f4;
    padding:40px;
}

button{
    background:red;
    color:white;
    border:none;
    padding:30px;
    border-radius:50%;
    font-size:20px;
    cursor:pointer;
}
</style>
</head>

<body>

<h1>Emergency Call</h1>

<button id="emergencyBtn">CALL</button>

<script>

let locationData = null;

navigator.geolocation.getCurrentPosition(pos=>{
    locationData = {
        lat: pos.coords.latitude,
        lng: pos.coords.longitude
    };
});

document.getElementById("emergencyBtn").onclick = async function(){

    if(!locationData){
        alert("Waiting for GPS...");
        return;
    }

    // Simulate incident creation (GitHub cannot truly write files)
    const incidentId = Date.now();

    alert("Incident created\nID: " + incidentId);

    // Redirect to Yeastar PBX call
    window.location.href =
    "YOUR_YEASTAR_CALL_LINK";

};

</script>

</body>
</html>
